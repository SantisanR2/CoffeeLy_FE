{"ast":null,"code":"import Swal from 'sweetalert2';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/rest.service\";\nimport * as i2 from \"src/app/core/storage.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../../shared/nav-finca/nav-finca/nav-finca.component\";\nimport * as i5 from \"@angular/common\";\n\nfunction LoteHistoryComponent_li_35_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 19)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 20);\n    i0.ɵɵlistener(\"click\", function LoteHistoryComponent_li_35_Template_div_click_3_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const poda_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.deletePoda(poda_r3.id);\n    });\n    i0.ɵɵelement(4, \"img\", 21);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const poda_r3 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(poda_r3.fecha);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r0.deleteLogoPath, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction LoteHistoryComponent_li_46_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 19)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 20);\n    i0.ɵɵlistener(\"click\", function LoteHistoryComponent_li_46_Template_div_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const riego_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.deleteRiego(riego_r6.id);\n    });\n    i0.ɵɵelement(6, \"img\", 21);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const riego_r6 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", riego_r6.fecha, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", riego_r6.agua, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r1.deleteLogoPath, i0.ɵɵsanitizeUrl);\n  }\n}\n\nfunction LoteHistoryComponent_li_57_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 19)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 20);\n    i0.ɵɵlistener(\"click\", function LoteHistoryComponent_li_57_Template_div_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const fertilizacion_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.deleteFertilizacion(fertilizacion_r9.id);\n    });\n    i0.ɵɵelement(6, \"img\", 21);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const fertilizacion_r9 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", fertilizacion_r9.fecha, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", fertilizacion_r9.relacion, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"src\", ctx_r2.deleteLogoPath, i0.ɵɵsanitizeUrl);\n  }\n}\n\nexport let LoteHistoryComponent = /*#__PURE__*/(() => {\n  class LoteHistoryComponent {\n    constructor(RestService, storageService, router) {\n      this.RestService = RestService;\n      this.storageService = storageService;\n      this.router = router;\n      this.deleteLogoPath = '../../../../assets/deleteLogo.png';\n      this.podar = \"../../../../assets/podar.png\";\n      this.regar = \"../../../../assets/regar.png\";\n      this.fertilizar = \"../../../../assets/fertilizar.png\";\n      this.cosecharPath = \"../../../../assets/cosechar.png\";\n      this.id_lote = localStorage.getItem('lote');\n    }\n\n    ngOnInit() {\n      this.poda();\n      this.riego();\n      this.fertilizacion();\n      this.siembra();\n      this.cosecha();\n    }\n\n    poda() {\n      this.RestService.get('/poda/All?id=' + this.id_lote).subscribe(respuesta => {\n        this.podas = respuesta;\n        this.podas.forEach(function recortar(poda) {\n          poda.fecha = poda.fecha.split('T', 2)[0];\n        });\n      });\n    }\n\n    riego() {\n      this.RestService.get('/riego/All?id=' + this.id_lote).subscribe(respuesta => {\n        this.riegos = respuesta;\n        this.riegos.forEach(function recortar(riego) {\n          riego.fecha = riego.fecha.split('T', 2)[0];\n        });\n      });\n    }\n\n    fertilizacion() {\n      this.RestService.get('/fertilizacion/All?id=' + this.id_lote).subscribe(respuesta => {\n        this.fertilizaciones = respuesta;\n        this.fertilizaciones.forEach(function recortar(fertilizacion) {\n          fertilizacion.fecha = fertilizacion.fecha.split('T', 2)[0];\n        });\n      });\n    }\n\n    siembra() {\n      this.RestService.get('/siembra/All?id=' + this.id_lote).subscribe(respuesta => {\n        this.siembras = respuesta;\n        this.siembras.forEach(siembra => {\n          siembra.fecha = siembra.fecha.split('T', 2)[0];\n          console.log(siembra.fecha);\n          this.fechaSiembra = siembra.fecha;\n          siembra.semilla = siembra.semilla.split(':', 2)[1];\n          this.variedad = siembra.semilla;\n        });\n      });\n    }\n\n    cosecha() {\n      this.RestService.get('/cosecha/All?id=' + this.id_lote).subscribe(respuesta => {\n        this.cosechas = respuesta;\n        this.cosechas.forEach(function recortar(cosecha) {\n          cosecha.fecha = cosecha.fecha.split('T', 2)[0];\n        });\n      });\n    }\n\n    irPoda() {\n      this.router.navigate(['/create/poda']);\n    }\n\n    irRiego() {\n      this.router.navigate(['/create/riego']);\n    }\n\n    irFertilizacion() {\n      this.router.navigate(['/create/fertilizacion']);\n    }\n\n    irCosecha() {\n      this.router.navigate(['/create/cosecha']);\n    }\n\n    deletePoda(id) {\n      const swalWithBootstrapButtons = Swal.mixin({\n        customClass: {\n          confirmButton: 'btn btn-success',\n          cancelButton: 'btn btn-danger'\n        },\n        buttonsStyling: true\n      });\n      swalWithBootstrapButtons.fire({\n        title: 'Estás seguro?',\n        text: \"No podrás deshacer esta acción!\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'Si, borrar',\n        cancelButtonText: 'No, cancelar',\n        reverseButtons: true,\n        background: '#282726',\n        color: '#C29F42'\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.borrar(id, 'poda');\n          swalWithBootstrapButtons.fire({\n            title: 'Borrado!',\n            text: 'La poda ha sido eliminada.',\n            icon: 'success',\n            background: '#282726',\n            color: '#C29F42'\n          });\n          this.refresh();\n        } else if (result.dismiss === Swal.DismissReason.cancel) {\n          swalWithBootstrapButtons.fire({\n            title: 'Cancelado',\n            text: 'La poda está a salvo',\n            icon: 'error',\n            background: '#282726',\n            color: '#C29F42'\n          });\n        }\n      });\n    }\n\n    deleteRiego(id) {\n      const swalWithBootstrapButtons = Swal.mixin({\n        customClass: {\n          confirmButton: 'btn btn-success',\n          cancelButton: 'btn btn-danger'\n        },\n        buttonsStyling: true\n      });\n      swalWithBootstrapButtons.fire({\n        title: 'Estás seguro?',\n        text: \"No podrás deshacer esta acción!\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'Si, borrar',\n        cancelButtonText: 'No, cancelar',\n        reverseButtons: true,\n        background: '#282726',\n        color: '#C29F42'\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.borrar(id, 'riego');\n          swalWithBootstrapButtons.fire({\n            title: 'Borrado!',\n            text: 'El riego ha sido eliminado.',\n            icon: 'success',\n            background: '#282726',\n            color: '#C29F42'\n          });\n          this.refresh();\n        } else if (result.dismiss === Swal.DismissReason.cancel) {\n          swalWithBootstrapButtons.fire({\n            title: 'Cancelado',\n            text: 'El riego está a salvo',\n            icon: 'error',\n            background: '#282726',\n            color: '#C29F42'\n          });\n        }\n      });\n    }\n\n    deleteFertilizacion(id) {\n      const swalWithBootstrapButtons = Swal.mixin({\n        customClass: {\n          confirmButton: 'btn btn-success',\n          cancelButton: 'btn btn-danger'\n        },\n        buttonsStyling: true\n      });\n      swalWithBootstrapButtons.fire({\n        title: 'Estás seguro?',\n        text: \"No podrás deshacer esta acción!\",\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'Si, borrar',\n        cancelButtonText: 'No, cancelar',\n        reverseButtons: true,\n        background: '#282726',\n        color: '#C29F42'\n      }).then(result => {\n        if (result.isConfirmed) {\n          this.borrar(id, 'fertilizacion');\n          swalWithBootstrapButtons.fire({\n            title: 'Borrado!',\n            text: 'La fertilización ha sido eliminada.',\n            icon: 'success',\n            background: '#282726',\n            color: '#C29F42'\n          });\n          this.refresh();\n        } else if (result.dismiss === Swal.DismissReason.cancel) {\n          swalWithBootstrapButtons.fire({\n            title: 'Cancelado',\n            text: 'La fertilización está a salvo',\n            icon: 'error',\n            background: '#282726',\n            color: '#C29F42'\n          });\n        }\n      });\n    }\n\n    borrar(id, entity) {\n      this.RestService.delete('/' + entity + '/delete?id=' + id).subscribe(respuesta => {});\n    }\n\n    refresh() {\n      window.location.reload();\n    }\n\n  }\n\n  LoteHistoryComponent.ɵfac = function LoteHistoryComponent_Factory(t) {\n    return new (t || LoteHistoryComponent)(i0.ɵɵdirectiveInject(i1.RestService), i0.ɵɵdirectiveInject(i2.StorageService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n\n  LoteHistoryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LoteHistoryComponent,\n    selectors: [[\"app-lote-history\"]],\n    decls: 63,\n    vars: 10,\n    consts: [[1, \"contenedor\"], [1, \"container-titulo\"], [1, \"titulo\"], [1, \"botones\"], [\"type\", \"button\", 1, \"boton\", 3, \"click\"], [\"alt\", \"Poda\", 3, \"src\"], [1, \"polaroid\"], [\"alt\", \"Riego\", 3, \"src\"], [\"alt\", \"Fertilizaci\\u00F3n\", 3, \"src\"], [1, \"siembra\"], [1, \"table-todo\"], [1, \"tablas\"], [1, \"poda\"], [1, \"item-first\"], [\"class\", \"item\", 4, \"ngFor\", \"ngForOf\"], [1, \"riego\"], [1, \"fertilizacion\"], [1, \"cosecha\"], [\"alt\", \"Cosecha\", 3, \"src\"], [1, \"item\"], [1, \"delete\", 3, \"click\"], [\"alt\", \"deleteLogo\", 3, \"src\"]],\n    template: function LoteHistoryComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"header\");\n        i0.ɵɵelement(1, \"app-nav-finca\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 0)(3, \"div\", 1)(4, \"h1\", 2);\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"div\", 3)(7, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function LoteHistoryComponent_Template_button_click_7_listener() {\n          return ctx.irPoda();\n        });\n        i0.ɵɵelement(8, \"img\", 5);\n        i0.ɵɵelementStart(9, \"div\", 6);\n        i0.ɵɵtext(10, \" Poda \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(11, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function LoteHistoryComponent_Template_button_click_11_listener() {\n          return ctx.irRiego();\n        });\n        i0.ɵɵelement(12, \"img\", 7);\n        i0.ɵɵelementStart(13, \"div\", 6);\n        i0.ɵɵtext(14, \" Riego \");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(15, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function LoteHistoryComponent_Template_button_click_15_listener() {\n          return ctx.irFertilizacion();\n        });\n        i0.ɵɵelement(16, \"img\", 8);\n        i0.ɵɵelementStart(17, \"div\", 6);\n        i0.ɵɵtext(18, \" Fertilizaci\\u00F3n \");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(19, \"div\", 9)(20, \"h3\");\n        i0.ɵɵtext(21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"h3\");\n        i0.ɵɵtext(23, \"El lote es de variedad: \");\n        i0.ɵɵelementStart(24, \"span\");\n        i0.ɵɵtext(25);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(26, \"div\", 10)(27, \"div\", 11)(28, \"h3\");\n        i0.ɵɵtext(29, \" Podas \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"ul\", 12)(31, \"li\", 13)(32, \"span\");\n        i0.ɵɵtext(33, \" Fecha \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(34, \"span\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(35, LoteHistoryComponent_li_35_Template, 5, 2, \"li\", 14);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(36, \"div\", 11)(37, \"h3\");\n        i0.ɵɵtext(38, \" Riegos \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"ul\", 15)(40, \"li\", 13)(41, \"span\");\n        i0.ɵɵtext(42, \"Fecha\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(43, \"span\");\n        i0.ɵɵtext(44, \"Agua (L)\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(45, \"span\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(46, LoteHistoryComponent_li_46_Template, 7, 3, \"li\", 14);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(47, \"div\", 11)(48, \"h3\");\n        i0.ɵɵtext(49, \" Fertilizaciones \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"ul\", 16)(51, \"li\", 13)(52, \"span\");\n        i0.ɵɵtext(53, \"Fecha \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"span\");\n        i0.ɵɵtext(55, \"Relaci\\u00F3n\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(56, \"span\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(57, LoteHistoryComponent_li_57_Template, 7, 3, \"li\", 14);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(58, \"div\", 17)(59, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function LoteHistoryComponent_Template_button_click_59_listener() {\n          return ctx.irCosecha();\n        });\n        i0.ɵɵelement(60, \"img\", 18);\n        i0.ɵɵelementStart(61, \"div\", 6);\n        i0.ɵɵtext(62, \" Cosechar \");\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\" Historial y modificaci\\u00F3n del lote \", ctx.id_lote, \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.podar, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.regar, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(4);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.fertilizar, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\"El lote fue sembrado el d\\u00EDa \", ctx.fechaSiembra, \"\");\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.variedad);\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"ngForOf\", ctx.podas);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngForOf\", ctx.riegos);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngForOf\", ctx.fertilizaciones);\n        i0.ɵɵadvance(3);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.cosecharPath, i0.ɵɵsanitizeUrl);\n      }\n    },\n    directives: [i4.NavFincaComponent, i5.NgForOf],\n    styles: [\".contenedor[_ngcontent-%COMP%]{display:flex;background-color:var(--coffeLy);background-repeat:no-repeat;background-size:cover;min-height:150vh;align-content:center;flex-direction:column;align-items:center;padding-top:5vh;gap:5vh;color:#c29f42}h3[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-style:italic}.siembra[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center;align-items:center}.titulo[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;color:#c29f42;font-family:Basker}.container-titulo[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;text-align:center}h3[_ngcontent-%COMP%]{color:#c29f42;font-family:Basker}.botones[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5vw}.boton[_ngcontent-%COMP%]{background-color:var(--coffeLy);border:none;display:flex;flex-direction:column;text-align:center;padding:10px 20px}.boton[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:5px;width:15vw;max-width:100%;cursor:pointer;min-width:10vw;height:auto;object-fit:contain;background-color:#c29f42;box-shadow:0 0 7px #997d30}.polaroid[_ngcontent-%COMP%]{background-color:#313131;color:#c29f42;width:15vw;min-width:10vw;height:4vh;box-shadow:0 4px 8px #0003,0 6px 20px #00000030;padding-top:1.5vh}.tablas[_ngcontent-%COMP%]{display:block;margin-top:1em;margin-left:1em;margin-right:1em;font-size:larger;align-content:center;text-align:center;flex-direction:column;align-items:center;padding:1vw 1vh 1vw 1vh;border-radius:8px;background-color:#313131}.poda[_ngcontent-%COMP%]{width:15vw;background-color:#313131}.fertilizacion[_ngcontent-%COMP%], .riego[_ngcontent-%COMP%]{width:25vw;background-color:#313131}.table-todo[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5vw}.item-first[_ngcontent-%COMP%]{margin-top:2vh;padding:1vh;display:flex;justify-content:space-between;align-items:center}.item-first[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Basker;font-weight:700}.item[_ngcontent-%COMP%]{margin-top:2vh;border:4px solid #997d30;border-radius:18px;box-shadow:0 0 7px #997d30;padding:1vh;display:flex;justify-content:space-between;color:#a6a7a3}.item[_ngcontent-%COMP%]:hover{background-color:#313131}.item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Basker}.capitalize[_ngcontent-%COMP%]{text-transform:capitalize}.delete[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:2rem;cursor:pointer}@media only screen and (max-width: 700px){.table-todo[_ngcontent-%COMP%]{flex-direction:column}.botones[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5vh}.boton[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .polaroid[_ngcontent-%COMP%]{width:40vw;min-width:10vw}.table[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5vw}.poda[_ngcontent-%COMP%], .fertilizacion[_ngcontent-%COMP%], .riego[_ngcontent-%COMP%]{width:60vw;min-width:40vw}.cosecha[_ngcontent-%COMP%]{padding-bottom:10vh}}\"]\n  });\n  return LoteHistoryComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}